// Top-level build file where you can add configuration options common to all sub-projects/modules.

def DEFAULT_COMPILE_SDK_VERSION = 29
// def DEFAULT_BUILD_TOOLS_VERSION = "27.0.3"
def DEFAULT_TARGET_SDK_VERSION = 29
def DEFAULT_MIN_SDK_VERSION = 21
def DEFAULT_SUPPORT_LIB_VERSION = "28.0.0"
def DEFAULT_GOOGLE_PLAY_SERVICES_VERSION = "17.0.0"
// used by react-native-camera because of react-native-qrcode-scanner
def DEFAULT_GOOGLE_PLAY_SERVICES_VISION_VERSION = "17.0.2"

def DEFAULT_FIREBASE_VERSION = "26.1.0"
def DEFAULT_FACEBOOK_SDK_VERSION = "8.1.0"
def DEFAULT_KOTLIN_VERSION = "1.4.10"

ext {
  compileSdkVersion = DEFAULT_COMPILE_SDK_VERSION
  // Each version of the Android Gradle Plugin now has a default version of the build tools
  // buildToolsVersion = DEFAULT_BUILD_TOOLS_VERSION
  targetSdkVersion = DEFAULT_TARGET_SDK_VERSION
  minSdkVersion = DEFAULT_MIN_SDK_VERSION
  supportLibVersion = DEFAULT_SUPPORT_LIB_VERSION
  googlePlayServicesVersion = DEFAULT_GOOGLE_PLAY_SERVICES_VERSION
  // used by react-native-camera because of react-native-qrcode-scanner
  googlePlayServicesVisionVersion = DEFAULT_GOOGLE_PLAY_SERVICES_VISION_VERSION

  firebaseVersion = DEFAULT_FIREBASE_VERSION
  facebookSdkVersion = DEFAULT_FACEBOOK_SDK_VERSION
  kotlinVersion = DEFAULT_KOTLIN_VERSION
}

project.ext {
  // Used by react-native-firebase
  set('react-native', [
    versions: [
      android : [
        minSdk: DEFAULT_MIN_SDK_VERSION,
        targetSdk: DEFAULT_TARGET_SDK_VERSION,
        compileSdk: DEFAULT_COMPILE_SDK_VERSION,
      ],

      firebase: [
        // Override Firebase SDK Version
        bom: DEFAULT_FIREBASE_VERSION
      ],
      play     : [
        "play-services-auth": DEFAULT_GOOGLE_PLAY_SERVICES_VERSION,
      ],
    ],
  ])
}

buildscript {
    repositories {
        google()
        jcenter()
        maven { url 'https://plugins.gradle.org/m2/' } // Gradle Plugin Portal added by OneSignal
    }
    dependencies {
        classpath 'com.android.tools.build:gradle:3.5.3'
        classpath 'com.google.gms:google-services:4.3.3'
        classpath 'gradle.plugin.com.onesignal:onesignal-gradle-plugin:[0.12.9, 0.99.99]'

        // NOTE: Do not place your application dependencies here; they belong
        // in the individual module build.gradle files
    }
}

allprojects {
    repositories {
				// Add jitpack repository (added by react-native-spinkit)
				maven { url "https://jitpack.io" }
        mavenLocal()
        mavenCentral()
        maven {
          url "https://maven.google.com"
        }
        maven {
            // All of React Native (JS, Obj-C sources, Android binaries) is installed from npm
            url("$rootDir/../node_modules/react-native/android")
        }
        maven {
            // Android JSC is installed from npm
            url("$rootDir/../node_modules/jsc-android/dist")
        }
        jcenter()

        configurations.all {
           resolutionStrategy {
             // Use this feature to force sdks versions
             // def firebaseVersion = DEFAULT_FIREBASE_VERSION
             // def googlePlayServicesVersion = DEFAULT_GOOGLE_PLAY_SERVICES_VERSION

             // force "com.google.firebase:firebase-core:$firebaseVersion"
             // force "com.google.firebase:firebase-auth:$firebaseVersion"
             // force "com.google.firebase:firebase-analytics:$firebaseVersion"
             // force "com.google.firebase:firebase-config:$firebaseVersion"
             // force "com.google.firebase:firebase-crash:$firebaseVersion"
             // force "com.google.firebase:firebase-database:$firebaseVersion"
             // force "com.google.firebase:firebase-storage:$firebaseVersion"
             // force "com.google.firebase:firebase-messaging:$firebaseVersion"

             // force "com.google.android.gms:play-services-gcm:$googlePlayServicesVersion"
             // force "com.google.android.gms:play-services-analytics:$googlePlayServicesVersion"
             // force "com.google.android.gms:play-services-location:$googlePlayServicesVersion"
           }
        }
    }
}

// In case you want to force configs on all projects
// subprojects { subproject ->
//     afterEvaluate {
//         if ((subproject.plugins.hasPlugin('android') || subproject.plugins.hasPlugin('android-library'))) {
//             android {
//                 compileSdkVersion rootProject.ext.compileSdkVersion
//                 buildToolsVersion rootProject.ext.buildToolsVersion
//             }
//         }
//     }
// }
